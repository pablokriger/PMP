<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Importar preguntas a Firestore</title>
</head>
<body>

<h3>Importar preguntas a Firestore</h3>
<button id="importar">Importar</button>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
  import {
    getFirestore,
    collection,
    doc,
    setDoc
  } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js";

  // üîπ Configuraci√≥n de Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyBWctc8V2t30ZX6B88xcfeljfaLfuK8ohM",
    authDomain: "cmp-exam-prep.firebaseapp.com",
    projectId: "cmp-exam-prep",
    storageBucket: "cmp-exam-prep.firebasestorage.app",
    messagingSenderId: "777953288024",
    appId: "1:777953288024:web:13f1413295d3f828340f2d"
  };

  // üîπ Inicializar Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // üîπ Importaci√≥n
  document.getElementById("importar").onclick = async () => {
    try {
      const res = await fetch("questions.json");
      const data = await res.json();

      if (!Array.isArray(data)) {
        alert("El JSON no tiene el formato esperado (array).");
        return;
      }

      for (const q of data) {
        // Usamos el n√∫mero de pregunta como ID (evita duplicados)
        await setDoc(
          doc(db, "questions", String(q.number)),
          q
        );
      }

      alert("Preguntas importadas correctamente (sin duplicados).");
    } catch (error) {
      console.error(error);
      alert("Error al importar las preguntas. Revisa la consola.");
    }
  };
</script>

</body>
</html>
